###############
#             #
# Definitions #
#             #
###############

# Applications
set $dmenu_run dmenu_run -fn "Dejavu Sans Mono-11" -nb "#282A36" -nf "#F8F8F2" -sb "#CAA9FA" -sf "#282A36"
set $dmenu     dmenu     -fn "Dejavu Sans-11" -nb "#282A36" -nf "#F8F8F2" -sb "#CAA9FA" -sf "#282A36"

# Border
smart_borders on
for_window [class="^.*"] border pixel 3

# Colors
client.focused          #6272A4 #6272A4 #F8F8F2 #6272A4   #6272A4
client.focused_inactive #44475A #44475A #F8F8F2 #44475A   #44475A
client.unfocused        #282A36 #282A36 #BFBFBF #282A36   #282A36
client.urgent           #44475A #FF5555 #F8F8F2 #FF5555   #FF5555
client.placeholder      #282A36 #282A36 #F8F8F2 #282A36   #282A36
client.background       #F8F8F2

# Floating
floating_maximum_size 1280x720

# Font
font pango:DejaVu Sans Mono 8

# Gaps
smart_gaps on
gaps inner 10

# Mod key
set $mod Mod4

# Mouse+$mod to drag floating windows
floating_modifier $mod

# Workspaces
set $ws1  "1"
set $ws2  "2"
set $ws3  "3"
set $ws4  "4"
set $ws5  "5"
set $ws6  "6"
set $ws7  "7"
set $ws8  "8"
set $ws9  "9"
set $ws10 "10"

###########
#         #
# Buttons #
#         #
###########

# Brightness
bindsym XF86MonBrightnessUp   exec xbacklight +10
bindsym XF86MonBrightnessDown exec xbacklight -10

# Media
bindsym XF86AudioRaiseVolume  exec amixer -q set Master 10%+ unmute  
bindsym XF86AudioLowerVolume  exec amixer -q set Master 10%- unmute  
bindsym XF86AudioMute         exec amixer -q set Master mute  
bindsym XF86AudioPlay         exec playerctl play-pause  
bindsym XF86AudioNext         exec playerctl next  
bindsym XF86AudioPrev         exec playerctl previous

# Screenshot
bindsym Print                 exec maim --noopengl --format=png /dev/stdout    | xclip -selection clipboard -t image/png -i
bindsym Ctrl+Print            exec maim --noopengl -s --format=png /dev/stdout | xclip -selection clipboard -t image/png -i
bindsym --release Shift+Print            exec maim --noopengl -i $(xdotool getactivewindow) | xclip -selection clipboard -t image/png -i
bindsym $mod+Print            exec maim --noopengl "$HOME/Pictures/Screenshots/Screenshot-$(date '+%d%m%Y-%H%M%S').png"
bindsym $mod+Ctrl+Print       exec maim --noopengl -s --format=png /dev/stdout | xclip -selection clipboard -t image/png -i

###############
#             #
# Starup Apps #
#             #
###############

# Compton
exec_always --no-startup-id compton

# Fcitx
exec        --no-startup-id fcitx

# Polybar
exec_always --no-startup-id ~/.config/polybar/launch.sh

# Wallpaper
exec_always --no-startup-id feh --bg-scale ~/Pictures/Wallpapers/Hyper\ Beast.jpg

####################
#                  #
# Quick launch app #
#                  #
####################

# File manager
bindsym $mod+f       exec pcmanfm
bindsym $mod+Mod1+f  exec nnn

# Run
bindsym $mod+r       exec $dmenu_run -p "Run" 
bindsym $mod+space   exec $dmenu_run -p "Run" 

# Terminal
bindsym $mod+t       exec urxvt
bindsym $mod+Return  exec urxvt

# Web browser
bindsym $mod+w       exec firefox
bindsym $mod+Mod1+w  exec firefox -private-window

##############
#            #
# Navigation #
#            #
##############

# Change focus
bindsym $mod+h focus left
bindsym $mod+j focus down
bindsym $mod+k focus up
bindsym $mod+l focus right

# Focus the parent container
bindsym $mod+p focus parent

# focus the child container
#bindsym $mod+d focus child

# change focus between tiling / floating windows
bindsym Mod1+Tab focus mode_toggle

# Split orientation
bindsym $mod+underscore split v
bindsym $mod+bar        split h

# Switch to workspace
bindsym $mod+1 workspace $ws1
bindsym $mod+2 workspace $ws2
bindsym $mod+3 workspace $ws3
bindsym $mod+4 workspace $ws4
bindsym $mod+5 workspace $ws5
bindsym $mod+6 workspace $ws6
bindsym $mod+7 workspace $ws7
bindsym $mod+8 workspace $ws8
bindsym $mod+9 workspace $ws9
bindsym $mod+0 workspace $ws10

##################
#                #
# Window Control #
#                #
##################

# Move focused window
bindsym $mod+Shift+h move left  100px
bindsym $mod+Shift+j move down  100px
bindsym $mod+Shift+k move up    100px
bindsym $mod+Shift+l move right 100px
bindsym $mod+Shift+Mod1+h move left  10px
bindsym $mod+Shift+Mod1+j move down  10px
bindsym $mod+Shift+Mod1+k move up    10px
bindsym $mod+Shift+Mod1+l move right 10px

# Move focused container to workspace
bindsym $mod+Shift+1 move container to workspace $ws1
bindsym $mod+Shift+2 move container to workspace $ws2
bindsym $mod+Shift+3 move container to workspace $ws3
bindsym $mod+Shift+4 move container to workspace $ws4
bindsym $mod+Shift+5 move container to workspace $ws5
bindsym $mod+Shift+6 move container to workspace $ws6
bindsym $mod+Shift+7 move container to workspace $ws7
bindsym $mod+Shift+8 move container to workspace $ws8
bindsym $mod+Shift+9 move container to workspace $ws9
bindsym $mod+Shift+0 move container to workspace $ws10

# Resize focused window
bindsym $mod+Ctrl+h       resize shrink width  100 px
bindsym $mod+Ctrl+j       resize grow   height 100 px
bindsym $mod+Ctrl+k       resize shrink height 100 px
bindsym $mod+Ctrl+l       resize grow   width  100 px
bindsym $mod+Ctrl+Shift+h resize shrink width  10 px
bindsym $mod+Ctrl+Shift+j resize grow   height 10 px
bindsym $mod+Ctrl+Shift+k resize shrink height 10 px
bindsym $mod+Ctrl+Shift+l resize grow   width  10 px

###############
#             #
# App control #
#             #
###############

# Floating
bindsym $mod+Shift+f floating toggle

# Fullscreen
bindsym $mod+Ctrl+f  fullscreen toggle

# Quit
bindsym $mod+Shift+q kill

###########
#         #
# Session #
#         #
###########

# Window manager menu
set  $wm_menu "[L]oad config file again - [R]estart i3wm inplace"
mode $wm_menu {
    bindsym l      exec i3-msg reload
    bindsym r      exec i3-msg restart
    bindsym Return mode "default"
    bindsym Escape mode "default"
}
bindsym $mod+Shift+w mode $wm_menu

# Session menu
set  $session_menu "[E]xit - [L]ock - [P]oweroff - [R]eboot - [S]uspend"
mode $session_menu {
    bindsym e       exec i3-msg exit
    bindsym l       exec i3lock-next; mode "default"
    bindsym p       exec systemctl poweroff
    bindsym r       exec systemctl reboot
    bindsym s       exec i3lock-next; exec systemctl suspend; mode "default"
    bindsym Return  mode "default"
    bindsym Escape  mode "default"
}
bindsym $mod+Shift+s mode $session_menu

#############
#           #
# Utilities #
#           #
#############

# Calculator
bindsym $mod+c exec xclip -o | $dmenu -p "Calculate" | xargs echo | bc 2>&1 | $dmenu -p "Result" | xclip -i

# Dictionary
bindsym $mod+d exec xclip -o | $dmenu -p "Translate" | xargs echo | trans -b :vi 2>&1 | $dmenu -p "Translated" | xclip -i

# Open copied video URL in Picture in Picture mode
bindsym $mod+y exec mpv $(xclip -o) --geometry=x20%+20-20 --force-window --ytdl-format=best

####################
#                  #
# Apps Preferences #
#                  #
####################

# lxapperance
for_window [class="Lxappearance"] floating enable

# mpv
for_window [class="mpv"] floating enable

# Sxiv
for_window [class="feh"] floating enable
